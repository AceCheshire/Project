# 软件设计说明书

## 作品名称

**Who Steal My Nut**[^1]

[^1]:这个名字从语法上看略有错误，然而在命名时我们觉得若是使用 Steals 或 Stole 不容易看出单词原形。

## 创意来源

**Poly  Bridge**

## 设计目的

我们希望打造的是一款具有较为新颖的玩法且能够激发玩家的策略思维的游戏。基于这种想法，我们希望玩家在像素风格的游戏界面中，可以在一定程度上自由地进行摸索和设计，并且为更好的游戏成绩找到新的方法与思路。<br>

为此，我们设计了风格相对统一的游戏界面，并且加入了舒缓放松的配乐 **(×)** 。我们特意将游戏中的文字设置为像素字，鼠标的样式也进行了某种程度上的更改，值得一提的是，这两项改动我们不是通过 **GUI API** 实现的。软件中对以上功能的实现可以说是 **tricky** 的，尽管其显然并不 **intelligent**。<br>

接下来会较为详细地列举出游戏中实现的功能。<br>

## 主要功能

* ### 启动界面

  我们更改了游戏的图标和启动动画，选取松果和平台这两个游戏中的重要元素进行组合，以凸显游戏的特色。并且，我们将游戏启动画面的背景色设置为粉色。<br>

* ### 主界面

  * #### 不可交互的功能

    我们为游戏标题，按钮和前景物体添加了进场效果，使游戏启动界面到主页面之间的衔接更为自然。当进场效果播放完毕，背景音乐也会随之响起。<br>

  * #### 可交互的功能

    首次进入游戏时，玩家将被要求输入昵称，按下键盘上的 **Tab** 键以向文本框中输入昵称。昵称输入完毕按下 **Enter** 键。

    我们在主界面设置了三个按钮，每个按钮均有按键音效，分别为 **Achievement**， **Readme** 和 **Exit** 按钮。这三个按钮分别具有不同的功能。<br>

    * ##### Achievement

      该按钮会唤起成就窗口。窗口中记载了玩家各成就的完成情况以及完成条件。在最下方，显示玩家本游戏的完成度。<br>

      更多关于成就系统的介绍请参考**<u>软件使用说明书</u>**。<br>

    * ##### Readme

      该按钮会唤起简介窗口。窗口中记载了玩家需要如何从主页面进入游戏，返回主页面的方法和部分游戏特色。<br>

    * ##### Exit

      用于退出游戏并关闭游戏窗口。<br>
    
      

* ### 菜单界面

  包括一个主页面返回按钮和一个关卡按钮。<br>

  

* ### 剧情界面

  点击**菜单**中第一关的关卡按钮后，将进入剧情界面。剧情界面为播放故事背景之用。剧情界面由多个剧情页面连缀而成。我们为每一个剧情页面设置了最少停留时间。<br>

  

* ### 游戏界面

  * #### 界面按钮

    * ##### 返回主界面按钮

    * ##### 返回菜单界面按钮

    * ##### 重新加载关卡按钮

    以上按钮用于切换界面，切换界面前将有弹窗二次询问。

  * ##### 指南按钮

    该按钮会唤起指南窗口。指南窗口详见**指南系统**。

  * ##### 建造模式开关

    该按钮用于开启和关闭建造模式。建造模式详见**建造系统**。

  * ##### 附魔模式开关

    该按钮用于开启，切换和关闭附魔模式。附魔模式详见**附魔系统**。

  * ##### 运行模式开关

    该按钮用于开启和关闭运行模式。运行模式详见**运行模式**。

  * #### 指南系统

    指南系统为未阅读软件使用说明书的玩家提供游戏帮助。主要介绍了游戏各按钮和键盘按键的用途，同时对游戏的物品以及判定系统做了简要的说明。玩家可以通过指南系统的引导进行游戏，软件使用说明书不是必需的。

  * #### 建造系统

    开启建造模式后，我们为平台可能建造的位置提供了预览，当处于平台可能建造的位置时，**鼠标左键**可以建造平台，**鼠标右键**可以删除平台。可以放置/建造平台的位置为地图中某块固定的区域。*建造的平台的位置使用 `List<Vector3Int>` 进行存储。*建造模式下，玩家不能进行附魔。

  * #### 附魔系统

    开启附魔模式后，我们为可能进行附魔的位置提供了预览，当处于可能附魔的位置时，**鼠标左键**可以进行附魔，**鼠标右键**可以取消附魔。可以附魔的位置为建造的平台的位置。*附魔平台的位置使用 `List<Vector3Int>` 进行存储。*附魔模式下，玩家不能进行建造。

    

  * #### 运行模式

    运行模式为开启时，正常情况下无法启用建造模式和附魔模式。松果将会产生并降落在起点。*松果按照存储位置的顺序进行弹跳，这种弹跳并非借助刚体*。当松果停下来时，将会触发结局判定。

  * #### 结局判定

    结局判定会依照松果的不同状态给予玩家不同的结局。现有结局为3个失败结局和3个成功结局。失败结局的介绍详见游戏中**指南系统**文本。成功结局暂时不在软件设计说明书中公布 **(×)**。 

  * #### 结算界面

    广义的结算界面包括失败结局的弹窗和成功结局出现的统计面板。失败结局记载失败的原因，成功结局可以看到本局游戏数据，个人历史最佳数据和公开最佳数据。记录的数据包括玩家昵称，**魔力**消耗值，平台数量，通关时间和松果运送时间。

  * #### 其他交互方式和游戏元素

    * ##### 地图

      地图上规定了起点和终点。若需要移动地图，请使用方向键或 **WASD** 键位。

    * ##### 魔力

      建造平台和附魔需要消耗魔力。魔力消耗值将在**建造模式**和**附魔模式**开启时实时显示。
      
      
  

## 所用技术

### 开发平台和脚本

本游戏使用的开发平台为 **Unity** , 我们使用了 **Shader Graph** 功能以实现游戏画面所需的后处理效果。编写 **Unity** 脚本时使用的开发工具为 **Visual Studio 2022 IDE** , 其引入的 **IntelliCode** 功能极大地便利了脚本的开发。<br>

### 美术资源

另外，本作的贴图资源不来源于免费素材库，贴图资源（除剧情界面背景和两张设定图）均是我们通过软件 **Aseprite** 完成的。剧情界面背景和两张设定图借助了 **Stable Diffusion** 大模型 **Kohaku** （ **Apache2** 开源）生成（图像经过后期处理）。<br>

### 版本管理

为了解决开发过程中的版本管理问题，我们采用 **git** 来管理不同版本的项目文件。我们的开发日志也会在 **GitHub** 上发布。<br>

### 文件说明

开发期间，我们使用 **Visual Studio Code** 维护远程仓库中的开发日志，而软件设计说明书和软件使用说明书则借助 **Typora** 完成。<br>

## 分工情况

我们这支队伍由三名同学组成：麦天乐（AceCheshire），何嵘烽（splendid-atom），谭海尧（Sleepiggyy）。[^2]

[^2]: 括号内为 GitHub 用户名。

何嵘烽负责的部分：游戏音效，成就系统，联网数据，玩家昵称输入，部分菜单界面

谭海尧负责的部分：运行模式，关卡设计，部分附魔模式

其余部分由麦天乐负责。
